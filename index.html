<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <style type = "text/css">
      ul{
          list-style-type: none;
      }
      body{
          background-color:white;
      }
      .container {
          width: 100%;
          max-height: 1000px;
          border: 1px solid #fff;
          background-color: #ffffff;
          box-shadow: 0px 2px 7px #292929;
          -moz-box-shadow: 0px 2px 7px #292929;
          -webkit-box-shadow: 0px 2px 7px #292929;
          border-radius: 10px;
          -moz-border-radius: 10px;
          -webkit-border-radius: 10px;
          overflow: scroll;

      }
      .mainbody {
          margin-top: 0;
          min-height: 900px;
          max-height: 90%;
          padding-top: 10px;
          background-color: #55ACEE
      }
      .header {
          color: #55ACEE;
          font-weight: bolder;
          font-size: 20px;
          font:Gotham;
          border-bottom: 2px solid #EEE;
          background-color: #ffffff;
          padding-top: 50px;
          padding-left: 20px;

          -webkit-border-top-left-radius: 5px;
          -webkit-border-top-right-radius: 5px;
          -moz-border-radius-topleft: 5px;
          -moz-border-radius-topright: 5px;
          border-top-left-radius: 5px;
          border-top-right-radius: 5px;
      }
      #messages{
          position: relative;
          background-color:#FFFFFF;
          font-size: 16px;
          font:Gotham;
          width: 750px;
          margin-left: 25%;
          border: 1px solid gray;
          padding: 10px;
          font-weight:bold;
          -webkit-border-top-left-radius: 5px;
          -webkit-border-top-right-radius: 5px;
          -webkit-border-bottom-left-radius: 5px;
          -webkit-border-bottom-right-radius: 5px;
      }
      span{
        font-weight:normal;
        font-size: 12px;
      }
      li{
        font-size: 20px;
        padding:10px;
        font:Gotham;
        padding: none;
        list-style-type: none;
        font-weight:normal;
      }
  </style>

  <body>
    <div class="container">
    <div class="header">Twittler</div>
    <div class="mainbody"></div>
    </div>

    <script>

      $(document).ready(function(){

       function doubleDigit(i){ //adds a zero to the minutes if it's less than 10 to read better
         if(i < 10){
            i = "0" + i;
            }
         return i;
       }
       
        setInterval(function(){
         //update();
         loadTweets();
        }, 5000);

        var oldIndex = 0;
        var newIndex = 0;
        var tempIndex;
        
        var loadTweets = function(){
            var date = new Date();

            //setting index like this to load newer tweets at the top instead of the bottom
            newIndex = streams.home.length - 1 - oldIndex;
            tempIndex = newIndex;

          while(streams.home.length - 1 > oldIndex){
            var tweet = streams.home[oldIndex];
            var $tweet = $('<div id ="messages"></div>');
            var $time = $('<span></span>');
            var $message = $('<li></li>');

            //check the time to display it correctly, do not want to display 0 for Noon and Midnight
            var checkTime = date.getHours()%12;
            if(checkTime === 0){
              checkTime = '12';
            }

            //add tweet, time, and username to tweet
            $tweet.text('@' + tweet.user);
            $time.text(': ' + checkTime + ':' + doubleDigit(date.getMinutes()) + ((date.getHours()/12 >= 1) ? 'PM':'AM'));
            $message.text(tweet.message);
            $tweet.prependTo($('.mainbody'));
            $time.appendTo($tweet);
            $message.appendTo($tweet);

            //work in progress, not working yet
            //if(streams.home.length > 20){ //if too many tweets start to fill the screen, delete some
            //  $('#messages:last').remove();
            //}

            //increment index
            oldIndex += 1;

            //$('#messages :even').css('background-color', '#252b30');

          }
        }



      });

    </script>
  </body>
</html>
