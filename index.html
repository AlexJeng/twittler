<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <style>
      ul{
          list-style-type: none;
      }
      body{
          background-color:white;
      }
      div{
          position: relative;
          background-color:#FFFFFF;
          font-size: 16px;
          font:Gotham;
          width: 750px;
          margin-left: 300px;
          border: 1px solid gray;
          
          padding: 10px;
          font-weight:bold;

      }
      span{
        font-weight:normal;
        font-size: 12px;
      }
      li{
        font-size: 20px;
        padding:10px;
        font:Gotham;
        padding: none;
        list-style-type: none;
        font-weight:normal;
      }
      

  </style>
  <body>
    <div class = "messages"></div>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');
        
        
       function doubleDigit(i){ //adds a zero to the minutes if it's less than 10 to read better

         if(i < 10){
            i = "0" + i;
            }

         return i;
       }


        setInterval(function(){
         //update();
         loadTweets();
        }, 5000);

        var oldIndex = 0;
        var newIndex = 0;
        var tempIndex;

        var loadTweets = function(){
            var date = new Date();
            newIndex = streams.home.length - 1 - oldIndex;
            tempIndex = newIndex;
            console.log('oldIndex ' + oldIndex + 'newIndex ' + newIndex + 'tempIndex ' + tempIndex);
          while(streams.home.length - 1 > oldIndex){
            var tweet = streams.home[oldIndex];
            var $tweet = $('<div></div>');
            var $time = $('<span></span>');
            var $message = $('<li></li>');
            $tweet.text('@' + tweet.user);
            $time.text(': ' + date.getHours()%12 + ':' + doubleDigit(date.getMinutes()) + ((date.getHours()/12 > 1) ? 'PM':'AM'));
            $message.text(tweet.message);
            $tweet.prependTo($body);
            $time.appendTo($tweet);
            $message.appendTo($tweet);
            if(streams.home.length > 100){ //if too many tweets start to fill the screen, delete some
              $('body div:last').remove();
            }
            oldIndex += 1;
          }
        }
      });

    </script>
  </body>
</html>
